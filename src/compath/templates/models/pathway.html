{% extends "base.html" %}

{% import "bootstrap/wtf.html" as wtf %}
{% import "bootstrap/fixes.html" as fixes %}
{% import "bootstrap/utils.html" as util %}

{% block title %}Pathway Details{% endblock %}
{% block styles %}
    {{ super() }}
{% endblock %}

{% block scripts %}
    {{ super() }}
    {% include "dependencies/common.html" %}
    <script type="text/javascript"
            src="{{ url_for('static', filename='js/pathway_controller.js', version='20181004') }}"></script>

    <script>
        // Initializes popover
        $(function () {
            $('[data-toggle="popover"]').popover({
                placement: 'top',
                trigger: 'hover'
            })
        });

        var resource = "{{resource}}";
        var pathwayName = "{{ pathway.name }}";
        var pathwayId = "{{pathway.resource_id }}";

    </script>
{% endblock %}

{% block content %}
    <div class="container" style="margin-top: 50px">
        {{ util.flashed_messages(dismissible=True, container=False) }}

        <div class="panel panel-default">
            <div class="panel-heading">{{ pathway.name }} Overview</div>
            <div class="panel-body">

                <table id="pathway-info" class="table table-bordered table-striped table-hover">
                    <tbody>
                    <tr>
                        <td>Name
                        </td>
                        <td>
                            <a href="{{ pathway.url }}">{{ pathway }}</a>
                        </td>
                    </tr>
                    <tr>
                        <td>Resource
                        </td>
                        <td>
                            {{ resource|upper }}
                        </td>
                    </tr>
                    <tr>
                        <td>Genes in Pathway
                        </td>
                        <td>
                            {% for hgnc_symbol in pathway.get_gene_set() %}
                                <a href="https://www.ncbi.nlm.nih.gov/gene/?term={{ hgnc_symbol }}">{{ hgnc_symbol }}</a>
                                {{ "," if not loop.last }}
                            {% endfor %}
                        </td>
                    </tr>
                    <tr>
                        <td>Statistics
                        </td>
                        <td>How many up and down votes it h as...
                        </td>
                    </tr>
                    <tr>
                        <td>Pathways Mapped
                        </td>
                        <td>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <hr>

                <div class="row">
                    <div class="text-center">
                        <div class="btn-group btn-space">
                            <a class="btn btn-primary"
                               data-toggle="popover" title="Suggest Pathways"
                               data-content="Suggests the most similar pathways according to genetic overlap">
                                Suggest Mappings By Overlap
                            </a>
                            <a class="btn btn-primary"
                               data-toggle="popover" title="Suggest Pathways"
                               data-content="Suggests the most similar pathways according to name similarity">
                                Suggest Mappings By Name
                            </a>
                            <button class="btn btn-primary" id="infer-mappings"
                                    data-toggle="popover" title="Infer Hierarchical Mappings in other Databases"
                                    data-content="Search for hierarchical mappings based on their equivalent pathways
                                    in other databases">Infer Hierarchical Mappings
                            </button>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <table id="info-table" class="table table-bordered table-hover table-responsive"></table>
                </div>

            </div>
        </div>
    </div>
    {% include "footer.html" %}
{% endblock %}
